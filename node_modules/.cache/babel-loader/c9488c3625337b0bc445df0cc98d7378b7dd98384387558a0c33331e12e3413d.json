{"ast":null,"code":"import{UserContext}from'../contexts/user.context';import React,{useEffect,useState,useContext}from'react';import{Link as RouterLink}from'react-router-dom';import{List,ListItem,ListItemText,ListItemButton,IconButton,Stack,Button,Box,Paper,Container}from'@mui/material';import EditIcon from'@mui/icons-material/Edit';import DeleteIcon from'@mui/icons-material/Delete';import AddIcon from'@mui/icons-material/Add';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Todo=_ref=>{let{todo,deleteTodo}=_ref;return/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{edge:\"end\",component:RouterLink,to:\"/edit/\".concat(todo._id),sx:{marginRight:1},children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(IconButton,{edge:\"end\",onClick:()=>deleteTodo(todo._id),color:\"error\",children:/*#__PURE__*/_jsx(DeleteIcon,{})})]}),divider:true,children:/*#__PURE__*/_jsx(ListItemButton,{children:/*#__PURE__*/_jsx(ListItemText,{primary:todo.title,secondary:\"\".concat(todo.description,\", Due: \").concat(todo.due)})})});};function TodoList(){const[todos,setTodos]=useState([]);const{logOutUser}=useContext(UserContext);// This function is called when the user clicks the \"Logout\" button.\nconst logOut=async()=>{try{// Calling the logOutUser function from the user context.\nconst loggedOut=await logOutUser();// Now we will refresh the page, and the user will be logged out and\n// redirected to the login page because of the <PrivateRoute /> component.\nif(loggedOut){window.location.reload(true);}}catch(error){alert(error);}};useEffect(()=>{async function getTodos(){const response=await fetch(\"http://localhost:5050/task/\");if(!response.ok){console.error(\"An error occurred: \".concat(response.statusText));return;}const todos=await response.json();setTodos(todos);}getTodos();},[]);const deleteTodo=async id=>{await fetch(\"http://localhost:5050/task/\".concat(id),{method:'DELETE'});setTodos(todos.filter(todo=>todo._id!==id));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",children:[/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'end','& > *':{m:1}},children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),color:\"primary\",component:RouterLink,to:\"/create-todo\",children:\"New Todo\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"inherit\",onClick:logOut,children:\"Logout\"})]})}),/*#__PURE__*/_jsx(List,{dense:true,component:Paper,children:todos.map(todo=>/*#__PURE__*/_jsx(Todo,{todo:todo,deleteTodo:deleteTodo},todo._id))})]})});}export default TodoList;","map":{"version":3,"names":["UserContext","React","useEffect","useState","useContext","Link","RouterLink","List","ListItem","ListItemText","ListItemButton","IconButton","Stack","Button","Box","Paper","Container","EditIcon","DeleteIcon","AddIcon","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Todo","_ref","todo","deleteTodo","secondaryAction","children","edge","component","to","concat","_id","sx","marginRight","onClick","color","divider","primary","title","secondary","description","due","TodoList","todos","setTodos","logOutUser","logOut","loggedOut","window","location","reload","error","alert","getTodos","response","fetch","ok","console","statusText","json","id","method","filter","maxWidth","display","flexDirection","alignItems","m","direction","spacing","variant","startIcon","dense","map"],"sources":["C:/Users/pc/todo-app-extension/client/todo-app/src/pages/Home.page.js"],"sourcesContent":["import { UserContext } from '../contexts/user.context';\r\nimport React, { useEffect, useState, useContext } from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemButton,\r\n  IconButton,\r\n  Stack,\r\n  Button,\r\n  Box,\r\n  Paper,\r\n  Container\r\n} from '@mui/material';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport AddIcon from '@mui/icons-material/Add';\r\n\r\nconst Todo = ({ todo, deleteTodo }) => (\r\n  <ListItem\r\n    secondaryAction={\r\n      <>\r\n        <IconButton\r\n          edge=\"end\"\r\n          component={RouterLink}\r\n          to={`/edit/${todo._id}`}\r\n          sx={{ marginRight: 1 }}\r\n        >\r\n          <EditIcon />\r\n        </IconButton>\r\n        <IconButton\r\n          edge=\"end\"\r\n          onClick={() => deleteTodo(todo._id)}\r\n          color=\"error\"\r\n        >\r\n          <DeleteIcon />\r\n        </IconButton>\r\n      </>\r\n    }\r\n    divider\r\n  >\r\n    <ListItemButton>\r\n    <ListItemText\r\n      primary={todo.title}\r\n      secondary={`${todo.description}, Due: ${todo.due}`}\r\n    />\r\n    </ListItemButton>\r\n  </ListItem>\r\n);\r\n\r\nfunction TodoList() {\r\n  const [todos, setTodos] = useState([]);\r\n  const { logOutUser } = useContext(UserContext);\r\n \r\n // This function is called when the user clicks the \"Logout\" button.\r\n const logOut = async () => {\r\n   try {\r\n     // Calling the logOutUser function from the user context.\r\n     const loggedOut = await logOutUser();\r\n     // Now we will refresh the page, and the user will be logged out and\r\n     // redirected to the login page because of the <PrivateRoute /> component.\r\n     if (loggedOut) {\r\n       window.location.reload(true);\r\n     }\r\n   } catch (error) {\r\n     alert(error)\r\n   }\r\n }\r\n\r\n  useEffect(() => {\r\n    async function getTodos() {\r\n      const response = await fetch(`http://localhost:5050/task/`);\r\n      if (!response.ok) {\r\n        console.error(`An error occurred: ${response.statusText}`);\r\n        return;\r\n      }\r\n      const todos = await response.json();\r\n      setTodos(todos);\r\n    }\r\n    getTodos();\r\n  }, []);\r\n\r\n  const deleteTodo = async (id) => {\r\n    await fetch(`http://localhost:5050/task/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n    setTodos(todos.filter((todo) => todo._id !== id));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      \r\n      <Container maxWidth=\"md\">\r\n        \r\n        <Box\r\n            sx={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'end',\r\n              '& > *': {\r\n                m: 1,\r\n              },\r\n            }}\r\n          >\r\n            <Stack direction=\"row\" spacing={2}>\r\n              <Button variant='contained' startIcon={<AddIcon />} color=\"primary\" component={RouterLink} to=\"/create-todo\">New Todo</Button>\r\n              <Button variant='contained' color=\"inherit\" onClick={logOut}>Logout</Button>\r\n            </Stack>\r\n          </Box>\r\n          <List dense component={Paper}>\r\n            {todos.map((todo) => (\r\n              <Todo\r\n                key={todo._id}\r\n                todo={todo}\r\n                deleteTodo={deleteTodo}\r\n              />\r\n            ))}\r\n          </List>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TodoList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}