{"ast":null,"code":"import{UserContext}from'../contexts/user.context';import{useEffect,useState}from\"react\";import{useParams,useNavigate,Link as RouterLink}from'react-router-dom';import{TextField,Button,Typography,FormLabel,Box,Container}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Todo(){const[form,setForm]=useState({title:\"\",description:\"\",due:\"\"});const[isNew,setIsNew]=useState(true);const params=useParams();const navigate=useNavigate();useEffect(()=>{async function fetchData(){var _params$id;const id=((_params$id=params.id)===null||_params$id===void 0?void 0:_params$id.toString())||undefined;if(!id)return;setIsNew(false);const response=await fetch(\"http://localhost:5050/task/\".concat(id));if(!response.ok){console.error(\"An error has occurred: \".concat(response.statusText));return;}const todo=await response.json();if(!todo){console.warn(\"Todo with id \".concat(id,\" not found\"));navigate(\"/\");return;}setForm(todo);}fetchData();},[params.id,navigate]);function updateForm(value){setForm(prev=>({...prev,...value}));}async function onSubmit(e){e.preventDefault();const item={...form};try{let response;if(isNew){response=await fetch(\"http://localhost:5050/task\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(item)});}else{response=await fetch(\"http://localhost:5050/task/\".concat(params.id),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(item)});}if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}navigate(\"/\");}catch(error){console.error('A problem occurred adding or updating a todo: ',error);}finally{setForm({title:\"\",description:\"\",due:\"\"});navigate(\"/\");}}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create/Update Todo\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:onSubmit,noValidate:true,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"title\",label:\"Tile\",title:\"title\",autoComplete:\"title\",autoFocus:true,value:form.title,onChange:e=>updateForm({title:e.target.value})}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"decription\",label:\"Description\",description:\"description\",autoComplete:\"description\",value:form.description,onChange:e=>updateForm({description:e.target.value})}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,type:\"date\",id:\"due\",label:\"Due\",due:\"due\",placeholder:\"\",autoComplete:\"due\",value:form.due,onChange:e=>updateForm({due:e.target.value})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},onSubmit:onSubmit,children:\"Save Todo\"})]})]});}","map":{"version":3,"names":["UserContext","useEffect","useState","useParams","useNavigate","Link","RouterLink","TextField","Button","Typography","FormLabel","Box","Container","jsx","_jsx","jsxs","_jsxs","Todo","form","setForm","title","description","due","isNew","setIsNew","params","navigate","fetchData","_params$id","id","toString","undefined","response","fetch","concat","ok","console","error","statusText","todo","json","warn","updateForm","value","prev","onSubmit","e","preventDefault","item","method","headers","body","JSON","stringify","Error","status","maxWidth","children","component","noValidate","sx","mt","variant","margin","required","fullWidth","label","autoComplete","autoFocus","onChange","target","type","placeholder","mb"],"sources":["C:/Users/pc/todo-app-extension/client/todo-app/src/pages/Todo.page.js"],"sourcesContent":["import { UserContext } from '../contexts/user.context';\r\nimport {useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate, Link as RouterLink } from 'react-router-dom';\r\nimport { TextField, Button, Typography, FormLabel, Box, Container } from '@mui/material';\r\n\r\nexport default function Todo() {\r\n  const [form, setForm] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    due: \"\",\r\n  });\r\n  const [isNew, setIsNew] = useState(true);\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const id = params.id?.toString() || undefined;\r\n      if (!id) return;\r\n      setIsNew(false);\r\n      const response = await fetch(`http://localhost:5050/task/${id}`);\r\n      if (!response.ok) {\r\n        console.error(`An error has occurred: ${response.statusText}`);\r\n        return;\r\n      }\r\n      const todo = await response.json();\r\n      if (!todo) {\r\n        console.warn(`Todo with id ${id} not found`);\r\n        navigate(\"/\");\r\n        return;\r\n      }\r\n      setForm(todo);\r\n    }\r\n    fetchData();\r\n  }, [params.id, navigate]);\r\n\r\n  function updateForm(value) {\r\n    setForm((prev) => ({ ...prev, ...value }));\r\n  }\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    const item = { ...form };\r\n    try {\r\n      let response;\r\n      if (isNew) {\r\n        response = await fetch(\"http://localhost:5050/task\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(item),\r\n        });\r\n      } else {\r\n        response = await fetch(`http://localhost:5050/task/${params.id}`, {\r\n          method: \"PATCH\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(item),\r\n        });\r\n      }\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.error('A problem occurred adding or updating a todo: ', error);\r\n    } finally {\r\n      setForm({ title: \"\", description: \"\", due: \"\" });\r\n      navigate(\"/\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <h1>Create/Update Todo</h1>\r\n      <Box component=\"form\" onSubmit={onSubmit} noValidate sx={{ mt: 1 }}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          id=\"title\"\r\n          label=\"Tile\"\r\n          title=\"title\"\r\n          autoComplete=\"title\"\r\n          autoFocus\r\n          value={form.title}\r\n          onChange={(e) => updateForm({ title: e.target.value })}\r\n        />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          id=\"decription\"\r\n          label=\"Description\"\r\n          description=\"description\"\r\n          autoComplete=\"description\"\r\n          value={form.description}\r\n          onChange={(e) => updateForm({ description: e.target.value })}\r\n        />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          type='date'\r\n          id=\"due\"\r\n          label=\"Due\"\r\n          due=\"due\"\r\n          placeholder=''\r\n          autoComplete=\"due\"\r\n          value={form.due}\r\n          onChange={(e) => updateForm({ due: e.target.value })}\r\n        />\r\n        \r\n        <Button\r\n          type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          sx={{ mt: 3, mb: 2 }}\r\n          onSubmit={onSubmit}\r\n        >\r\n          Save Todo\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}